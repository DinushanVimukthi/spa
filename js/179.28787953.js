"use strict";(self["webpackChunk_0_4"]=self["webpackChunk_0_4"]||[]).push([[179],{3402:(e,l,o)=>{o.d(l,{gq:()=>n,rr:()=>r});var t=o(2490),a=o(3277),s=o(9040),i=o(1741);async function n(e){console.log(e.files[0]);const l=e.files[0],o={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0};let n=t.fAuth.currentUser.uid;try{const r=await(0,i.Z)(l,o),u=(0,a.iH)(t.fS,"/images/"+n),d=(await(0,a.KV)(u,r).then((()=>{console.log("Uploaded a blob or file!")})),await(0,a.Jt)(u));console.log(d);const c=(0,s.iH)(t.fDb,"/images/"+t.fAuth.currentUser.uid);await(0,s.t8)(c,{ID:currentUserId,Name:e.name,Url:d})}catch(r){console.log(r)}}const r=async()=>{const e=(0,s.iH)(t.fDb,"images/"+t.fAuth.currentUser.uid),l=await(0,s.U2)(e).then((e=>{}));console.log(l)}},8179:(e,l,o)=>{o.r(l),o.d(l,{default:()=>R});var t=o(3673),a=o(2323);const s=(0,t.Uk)("UCSC 1st Year DashBoard"),i={class:"q-pa-sm absolute-top-right"},n={class:"q-ma-sm"},r=["src"],u=(0,t.Uk)("Click to Edit Profile");function d(e,l,o,d,c,m){const p=(0,t.up)("q-toolbar-title"),g=(0,t.up)("q-btn"),h=(0,t.up)("q-tooltip"),f=(0,t.up)("q-avatar"),w=(0,t.up)("edit-profile"),q=(0,t.up)("q-dialog"),k=(0,t.up)("q-toolbar"),U=(0,t.up)("q-header"),b=(0,t.up)("router-view"),y=(0,t.up)("q-page-container"),_=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(_,{view:"lHh Lpr lFf"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{elevated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:(0,a.C_)(this.$q.dark.mode?"row bg-dark":"row")},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"absolute-top-left q-ma-sm q-pa-sm"},{default:(0,t.w5)((()=>[s])),_:1}),(0,t.Wm)(g,{class:"absolute-center",outlined:"",style:(0,a.j5)(this.$q.dark.mode?"color: goldenrod":"color: white"),label:this.$q.dark.mode?"Dark":"light",icon:this.$q.dark.mode?"dark_mode":"light_mode",onClick:e.ToggleDark},null,8,["style","label","icon","onClick"]),(0,t._)("div",i,[(0,t._)("span",n,(0,a.zw)(e.GetUsername),1),(0,t.Wm)(f,{style:{"margin-left":"10px"},class:"cursor-pointer",size:"2.5rem",onClick:l[0]||(l[0]=l=>e.triggers=!0)},{default:(0,t.w5)((()=>[(0,t._)("img",{src:null!=e.getpic?e.getpic:"https://cdn.quasar.dev/img/avatar.png"},null,8,r),null!=e.getpic?((0,t.wg)(),(0,t.j4)(h,{key:0,class:"bg-positive text-black"},{default:(0,t.w5)((()=>[u])),_:1})):(0,t.kq)("",!0)])),_:1}),"dash"===e.page?((0,t.wg)(),(0,t.j4)(g,{key:0,outline:"",icon:"lock_open",label:"SignOut",onClick:e.LogOut},null,8,["onClick"])):(0,t.kq)("",!0),e.IsSuperAdmin&&"/SuperAdmin"!=e.$route.fullPath?((0,t.wg)(),(0,t.j4)(g,{key:1,style:{"margin-left":"10px"},label:"Super",to:"/SuperAdmin"})):(0,t.kq)("",!0),e.IsSuperAdmin&&"/SuperAdmin"===e.$route.fullPath?((0,t.wg)(),(0,t.j4)(g,{key:2,style:{"margin-left":"10px"},label:"Dash",to:"/dash"})):(0,t.kq)("",!0),(0,t.Wm)(q,{modelValue:e.triggers,"onUpdate:modelValue":l[1]||(l[1]=l=>e.triggers=l),persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,t.w5)((()=>[(0,t.Wm)(w)])),_:1},8,["modelValue","maximized"])])])),_:1},8,["class"])])),_:1}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b)])),_:1})])),_:1})}var c=o(3617);o(3402);const m=(0,t.Uk)("Close"),p={style:{width:"70%"},class:"q-ma-sm"},g=(0,t.Uk)(" New User Name "),h={style:{width:"70%"},class:"flex flex-center"};function f(e,l,o,a,s,i){const n=(0,t.up)("q-space"),r=(0,t.up)("q-tooltip"),u=(0,t.up)("q-btn"),d=(0,t.up)("q-bar"),c=(0,t.up)("q-img"),f=(0,t.up)("q-icon"),w=(0,t.up)("q-file"),q=(0,t.up)("q-input"),k=(0,t.up)("q-card-section"),U=(0,t.up)("q-card"),b=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(U,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n),(0,t.wy)(((0,t.wg)(),(0,t.j4)(u,{dense:"",flat:"",icon:"close"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"bg-white text-primary"},{default:(0,t.w5)((()=>[m])),_:1})])),_:1})),[[b]])])),_:1}),(0,t.Wm)(k,{class:"flex flex-center column"},{default:(0,t.w5)((()=>[null==a.model?((0,t.wg)(),(0,t.j4)(c,{key:0,src:e.User.Url,"spinner-color":"red",ratio:16/9,style:{width:"70%"}},null,8,["src"])):(0,t.kq)("",!0),null!=a.model?((0,t.wg)(),(0,t.j4)(c,{key:1,src:a.imageurl,"spinner-color":"red",ratio:16/9,style:{width:"70%"}},null,8,["src"])):(0,t.kq)("",!0),(0,t.Wm)(w,{class:"bg-positive q-ma-md",label:"Add New Profile Image",clearable:"",standout:"",modelValue:a.model,"onUpdate:modelValue":l[0]||(l[0]=e=>a.model=e),style:{width:"70%"},onChange:l[1]||(l[1]=e=>a.updateFile())},{append:(0,t.w5)((()=>[(0,t.Wm)(f,{name:"camera"})])),_:1},8,["modelValue"]),(0,t._)("div",p,[g,(0,t.Wm)(q,{modelValue:a.Username,"onUpdate:modelValue":l[2]||(l[2]=e=>a.Username=e),label:e.User.name,dense:""},null,8,["modelValue","label"])]),(0,t._)("div",h,[(0,t.wy)((0,t.Wm)(u,{class:"q-ma-lg bg-secondary",label:"Update Profile",onClick:i.Update_Profile},null,8,["onClick"]),[[b]])])])),_:1})])),_:1})])}o(71),o(7965),o(6016);var w=o(1959),q=o(8825);const k={computed:{...(0,c.Se)("stores",["User","GetUsername"])},setup(){const e=(0,q.Z)(),l=(0,w.iH)(null),o=(0,w.iH)(""),a=(0,w.iH)("");return(0,t.YP)(l,(e=>{console.log(e),null==e?console.log(e):(console.log(a.value),a.value=URL.createObjectURL(e))})),{maximizedToggle:(0,w.iH)(!1),model:l,q:e,Username:o,imageurl:a,updateFile(){console.log("updateed"),a.value=URL.createObjectURL(l.value),console.log(a.value)}}},methods:{...(0,c.nv)("stores",["ChangeProfilename","ChangeProfilePicture"]),Update_Profile(){console.log("Update_Profile",this.Username),console.log(this.model),null!=this.model&&this.ChangeProfilePicture({file:this.model}),""!=this.Username&&this.ChangeProfilename({name:this.Username}),this.q.notify({color:"positive",textColor:"white",message:"Profile Updated"}),console.log(this.Username,this.model)}}};var U=o(4260),b=o(151),y=o(846),_=o(2025),v=o(8240),Z=o(8870),C=o(5589),P=o(4027),Q=o(4974),W=o(4554),x=o(4689),S=o(677),H=o(7518),T=o.n(H);const j=(0,U.Z)(k,[["render",f]]),A=j;T()(k,"components",{QCard:b.Z,QBar:y.Z,QSpace:_.Z,QBtn:v.Z,QTooltip:Z.Z,QCardSection:C.Z,QImg:P.Z,QFile:Q.Z,QIcon:W.Z,QInput:x.Z}),T()(k,"directives",{ClosePopup:S.Z});const D=(0,t.aZ)({name:"MainLayout",setup(){const e=(0,w.iH)(!1);return{triggers:(0,w.iH)(!1),maximizedToggle:(0,w.iH)(!1),close:e}},computed:{...(0,c.Se)("stores",["IsSuperAdmin","getpic","GetUsername","SecondSemExam"]),page(){return"/"===this.$route.fullPath?"/":"dash"}},components:{EditProfile:A},methods:{...(0,c.nv)("stores",["LogOut"]),ShowNotification(){new Notification("New mesage",{body:"You have a new message"})},async setTime(){console.log("permission");let e=await Notification.requestPermission();"granted"===e&&(this.ShowNotification(),console.log("permission granted"))},ToggleDark(){console.log(this.$q.dark.mode),this.$q.dark.toggle()},closepop(){this.close=!0,setTimeout((()=>{this.close=!1}),5e3)}}});var V=o(3066),I=o(3812),L=o(9570),N=o(3747),$=o(5096),z=o(5926),O=o(1762),B=o(2652);const F=(0,U.Z)(D,[["render",d]]),R=F;T()(D,"components",{QLayout:V.Z,QHeader:I.Z,QToolbar:L.Z,QToolbarTitle:N.Z,QBtn:v.Z,QAvatar:$.Z,QTooltip:Z.Z,QDialog:z.Z,QFooter:O.Z,QPageContainer:B.Z})}}]);